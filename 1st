# Write your code here :-)
from microbit import *
import music
#from gesture import *
import neopixel
from random import randint
#import random

number = 5
np = neopixel.NeoPixel(pin1, number)

secs = 5
switch = 0
light_switch = 0
on_note = ['c', 'g']
off_note = ['g', 'c8']
shake_count = 0
note = ['c1:4', 'e:2', 'g', 'c8']
#mapping function , ori = original
def map(value, oriMin, oriMax, newMin, newMax):
    return ((value-oriMin)/(oriMax-oriMin))*(newMax-newMin)+newMin

start = 0
shake= 0
while True:
    display.clear()
    gesture = accelerometer.current_gesture()


    if button_a.is_pressed():#the device turns "on"
        display.show(Image.HAPPY)
        music.play(on_note)
        
        switch=1
    else:
        np.clear()

    if switch != 1:
        print("off")
    
    else:
        
        if gesture == "shake":
            
            shake_count += 1
            shake = 1

            if (shake == 1) & (shake_count <= 6):#one section lasts for 20 seconds
                for i in range (1):
                    np[i] = (0,0,255)
                    np.show()
                    sleep(1000)
                shake = 0
                switch = 1
            print(shake)
            print(switch)
